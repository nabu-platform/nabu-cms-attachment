<sequence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" disabled="false" id="44fa22d5-ced0-4444-b898-5a35572d23ec">
	<steps xsi:type="be.nabu.libs.services.vm.step.Map" disabled="false" id="86a7fa8a-f54b-402a-8f22-123cd1be8530">
		<steps xsi:type="be.nabu.libs.services.vm.step.Invoke" disabled="false" id="452b94f9-bd56-40b7-8bd6-b6f4b8aea182" serviceId="nabu.cms.attachment.database.attachment.selectById" resultName="resultb61e7b9a4d47411f8c6b9e05ccec71eb" invocationOrder="0" temporaryMapping="true" y="122" x="116">
			<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="d6fbd392-3b12-4cfe-a0fa-57a429b629f7" optional="false" fixedValue="false" mask="false">
				<from>input/configuration/connectionId</from>
				<to>connection</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="0a2f0103-b38b-4a21-bd63-25da725f41ed" optional="false" fixedValue="false" mask="false">
				<from>input/path/attachmentId</from>
				<to>parameters/id</to>
			</steps>
			<asynchronous>false</asynchronous>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="66c6cad0-af69-4b77-8aaa-8534589a66fd" optional="false" fixedValue="false" mask="false">
			<from>resultb61e7b9a4d47411f8c6b9e05ccec71eb/results[0]</from>
			<to>attachment</to>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="d6e0fd9b-cfdc-4b66-acf1-c309aec8c5a9" optional="false" fixedValue="false" mask="false">
			<from>input/path/nodeId</from>
			<to>nodeId</to>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Switch" disabled="false" id="b35a99a7-6e82-4553-8b19-6d68a27176f0">
		<steps xsi:type="be.nabu.libs.services.vm.step.Throw" disabled="false" label="attachment == null || attachment/nodeId != nodeId" id="08583909-c5bb-4b7f-b139-2a078a3a4bed" message="Invalid attachment" xsi:nil="true"/>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Map" disabled="false" comment="Map output" id="80611d47-f6ca-4c18-b2b9-d8177752730d">
		<steps xsi:type="be.nabu.libs.services.vm.step.Invoke" disabled="false" id="25b1e51c-ecd4-41d9-a7be-2af685346e60" serviceId="nabu.frameworks.datastore.Services.retrieve" resultName="result38ad7bd5850a43cb8962c1ed17879b60" invocationOrder="0" temporaryMapping="true" y="210" x="60">
			<asynchronous>false</asynchronous>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Invoke" disabled="false" id="833f7d2b-00e0-4d8a-b62c-1bf41f17506b" serviceId="nabu.frameworks.datastore.Services.properties" resultName="result5f4e5a9f19e543108102c8cb706084b1" invocationOrder="0" temporaryMapping="true" y="10" x="30">
			<asynchronous>false</asynchronous>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="141a53bf-78fc-4e9f-a553-8fed6909fe8d" optional="false" fixedValue="false" mask="false">
			<from>result5f4e5a9f19e543108102c8cb706084b1/properties/contentType</from>
			<to>output/header/contentType</to>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="94be7d26-60f0-49b6-abeb-19befef2baaf" optional="false" fixedValue="false" mask="false">
			<from>result5f4e5a9f19e543108102c8cb706084b1/properties/size</from>
			<to>output/header/contentLength</to>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="3d12854c-d4b2-44d7-bfb9-afb0091895db" optional="false" fixedValue="false" mask="false">
			<from>result38ad7bd5850a43cb8962c1ed17879b60/stream</from>
			<to>output/content</to>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Invoke" disabled="false" id="1f5b5a1f-57e6-4ecc-9141-b116933a6fd3" serviceId="nabu.cms.attachment.utils.formatDate" resultName="result905781b93a29475f83b2f185c3360ced" invocationOrder="1" temporaryMapping="true" y="300" x="271">
			<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="c7cb0f8d-5beb-4f0f-b9a4-910eaff72ff1" optional="false" fixedValue="false" mask="false">
				<from>result5f4e5a9f19e543108102c8cb706084b1/properties/lastModified</from>
				<to>date</to>
			</steps>
			<asynchronous>false</asynchronous>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="12f7deea-bd0b-40ce-a1d8-e047097a3535" optional="false" fixedValue="false" mask="false">
			<from>result905781b93a29475f83b2f185c3360ced/formattedDate</from>
			<to>output/header/lastModified</to>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="a1be1343-c878-448a-b600-a5bf557bc89a" optional="false" fixedValue="false" mask="false">
			<from>result5f4e5a9f19e543108102c8cb706084b1/properties/name</from>
			<to>name</to>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Map" disabled="false" comment="Set content disposition" id="b0fea395-ccf8-4d88-8f6b-84831ba312d0">
		<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="42f68db0-07c8-4bd1-a9ef-52aa9e80cbf5" optional="false" fixedValue="true" mask="false">
			<from>="attachment;filename=" + name </from>
			<to>output/header/contentDisposition</to>
		</steps>
	</steps>
</sequence>